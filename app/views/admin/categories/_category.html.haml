.category-container{data: {id: category.id}}
  .row.category-row
    .row.category-row
      .col-10.listed-category-col
        .row{:id => "category-#{category.display_name(I18n.locale).squish.downcase.tr(" ","_")}"}
          .col-12.listed-category-col
            = "".rjust(category.descendant_level*4).gsub(" ", "&nbsp;").html_safe + category.display_name(I18n.locale)
      .col-2.listed-category-col
        = link_to edit_admin_category_path(category), :class => "category-action-edit", :id => "edit_category_#{category.id}" do
          = icon_tag("edit", ["icon-fix"])
        - remove_html_opts = { class: "category-action-remove", id: "remove_category_#{category.id}" }

        - if !category.can_destroy?
          = icon_tag("cross", ["icon-fix disabled"])
        - elsif category.remove_needs_caution?
          = link_to remove_admin_category_path(category), remove_html_opts do
            = icon_tag("cross", ["icon-fix"])
        - else
          = link_to admin_category_path(category), remove_html_opts.merge(:method => :delete, :confirm => t("admin.categories.index.remove_category_confirmation", {category_name: category.display_name(I18n.locale)})) do
            = icon_tag("cross", ["icon-fix"])

- if category.children.count > 0
  = render :partial => "category", :collection => category.children, :as => :category, locals: {category_count: category.children.size}